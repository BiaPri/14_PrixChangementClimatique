version: 2

models:
  - name: bronze_rei
    description: >
      Données brutes REI 2022 importées depuis le fichier CSV stocké dans
      le bucket S3 du projet (pipeline_inputs). Ce modèle correspond à la
      couche bronze et ne contient aucune transformation métier.
    columns:
      - name: departement
        description: "Code du département de la commune"
      - name: direction
        description: "Code direction administrative"
      - name: commune
        description: "Code INSEE de la commune"
      - name: commune_recensee
        description: "Indique si la commune est recensée (R)"
      - name: numero_siren_epci
        description: "Numéro SIREN de l’EPCI auquel appartient la commune"
      - name: libelle_groupement
        description: "Nom du groupement intercommunal"
      - name: option_fiscale_epci
        description: "Option fiscale de l’EPCI (FPA, FPU, FPZ)"
      - name: forme_juridique_epci
        description: "Type d’EPCI (CA, CU, CC, SAN, Métropole)"
      - name: libelle_commune
        description: "Nom officiel de la commune"
      - name: fnb_commune_base_nette
        description: "Base nette FNB pour la commune"
      - name: fnb_commune_taux_net
        description: "Taux net FNB appliqué à la commune"
      - name: fnb_commune_montant_reel
        description: "Montant réel FNB pour la commune"
      - name: tafnb_commune_base_taxable_commune
        description: "Base taxable TAFNB pour la commune"
      - name: fnb_commune_taux_net
        description: "Taux net TAFNB appliqué à la commune"
      - name: tafnb_commune_montant_reel
        description: "Montant réel TAFNB pour la commune"
      - name: code_insee
        description: "Code INSEE de la commune"
  
  - name: insee_filosofi_2021
    description: >
      Données INSEE
      Principaux indicateurs sur la pauvreté en 2021 : 
      niveau de vie, taux de pauvreté, part des ménages imposés et décomposition du revenu disponible
      Sous-titre : Revenus localisés sociaux et fiscaux (Filosofi)
      Identifiant du jeu de données : DS_FILOSOFI_CC
      https://catalogue-donnees.insee.fr/fr/catalogue/recherche/DS_FILOSOFI_CC
    persist_docs:
      relation: true 
      columns: true 
    columns:
      - name: geo
        description: "Exemple : 001 pour Paris, 002 pour Lyon, 144 pour Louvier, 32462 pour Vic-Fezensac..."
        type: STRING
      - name: geo_object
        description: "Type de geo : COM, BV2022"
        type: STRING
      - name: filosofi_measure
        description: "Mesures filosofi  - voir les metadonnes https://catalogue-donnees.insee.fr/fr/catalogue/recherche/DS_FILOSOFI_CC"
        type: STRING
      - name: unit_measure
        description: >
          Unité de mesure : 
          PT pour pourcentage, EUR_YR pour Euros par an, _Z pour nombre et PS pour personnes
        type: STRING
      - name: unit_mult
        description: "Quantité d'unités (en puissance de 10)"
        type: INTEGER
      - name: conf_status
        description: "Statut de confidentialité : F pour diffusable, C pour Confidentiel (obs_value sera null)"
        type: STRING
      - name: obs_status
        description: "Statut de l'observation : A pour normal, O pour valeur manquante"
        type: STRING
      - name: time_period
        description: "Periode temporelle: année - toujours 2021"
        type: INTEGER
      - name: obs_value
        description: "Valeur numérique"
        type: FLOAT
